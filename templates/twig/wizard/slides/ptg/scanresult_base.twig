{% extends 'wizard/slides/common/base.twig' %}

{% block slide_body %}
	{{ slideMacros.slideTitle( data.context_sing~' Guard Scan Results' ) }}

	{% if data.result|length == 0 %}
		<p>There were no files discovered that need your attention.</p>
	{% else %}
		<p>There are {{ data.result|length }} {{ data.context_sing }}(s) that need your attention.</p>

		<div id="accord{{ data.context_sing }}" class="scan-results-accordian">
		{% set resultCounter = 0 %}
		{% for item_name,item_results in data.result %}
			{% set resultCounter = resultCounter + 1 %}

			<div class="card">
				<div class="card-header">
					<h5 class="mb-0">
						<button class="btn btn-link" data-toggle="collapse" data-target="#coll{{ resultCounter }}">
							{{ data.context_sing }}: {{ item_name }}
						</button>
					</h5>
				</div>

				<div id="coll{{ resultCounter }}" class="collapse" data-parent="#accord{{ data.context_sing }}">
				  <div class="card-body">
					  {% if item_results.different is defined %}
						  <div class="indent_slight">
							  <h6>Modified Files: {{ item_results.different|length }}</h6>
							  {% for file in item_results.different %}
								  <li><code class="filepath">{{ file }}</code></li>
							  {% endfor %}
						  </div>
					  {% endif %}

					  {% if item_results.missing is defined %}
						  <div class="indent_slight">
							  <h6>Missing Files: {{ item_results.missing|length }}</h6>
							  {% for file in item_results.missing %}
								  <li><code class="filepath">{{ file }}</code></li>
							  {% endfor %}
						  </div>
					  {% endif %}

					  {% if item_results.unrecognised is defined %}
						  <div class="indent_slight">
							  <h6>Unrecognised Files: {{ item_results.unrecognised|length }}</h6>
							  {% for file in item_results.unrecognised %}
								  <li><code class="filepath">{{ file }}</code></li>
							  {% endfor %}
						  </div>
					  {% endif %}

					  {% if item_results.is_wporg %}TODO: reinstall{% endif %}
				  </div>
				</div>
				<div class="card-footer">
					Actions:
				</div>
			  </div>
		{% endfor %}
		</div>

	{% endif %}

{% endblock %}